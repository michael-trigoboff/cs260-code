revision 5 is the start of an attempt to do recursive graph traversal code
